<!-- src/views/settings.html -->
{% extends "layouts/main.njk" %}
{% from "macros/form_loop.njk" import form_href_el %}
{% from "macros/generic_dialog.njk" import generic_dialog %}
{% block hscripts %}
<script defer src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
{% endblock %}
{% block body %}
{% include "partials/controls.njk" %}
<div class="button-grid">
    {% set public_routes = 'public_routes' | getParam %}
    {% for config in 'dashboard_signals_config' | getParam %}
    <div class="button button-{{ config.theme }}">
        <button
                data-state="idle"
                data-sending="Sending"
                data-error="Error"
                data-success="Success"
                data-wait="{{ config.wait }}"
                data-href="{{ public_routes.PUBLIC_SIGNAL_CREATE }}?type={{ config.type }}&description={{ config.description }}"
                onclick="javascript:sendSignal(this)"
        >
            {{ config.emoji }} {{ config.label }}
        </button>
    </div>
    {% endfor %}
</div>
<img src="/media/qrcode.png">
{% endblock %}
{% block fscripts %}
{{ generic_dialog("generic_dialog") }}
<script defer src="/js/generic_dialog.js" type="text/javascript"></script>
<script defer src="/js/send_signal.js" type="text/javascript"></script>
<script defer src="/js/sortable_buttons.js" type="text/javascript"></script>
{% endblock %}